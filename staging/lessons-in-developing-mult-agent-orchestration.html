<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Escaping Dark Alleys: Process Discipline in AI Development</title>
    <style>
        :root {
            --accent: #FF2D92;
            --accent-secondary: #FF9F0A;
            --accent-dim: rgba(255, 45, 146, 0.15);
            --green: #30D158;
            --red: #FF453A;
            --orange: #FF9F0A;
            --blue: #0A84FF;
            --purple: #BF5AF2;
            --teal: #64D2FF;
            
            --font-headline: clamp(32px, 8vw, 72px);
            --font-medium-headline: clamp(24px, 5vw, 48px);
            --font-subhead: clamp(16px, 3vw, 28px);
            --font-body: clamp(14px, 2.5vw, 18px);
            --font-small: clamp(12px, 2vw, 14px);
            --font-big-number: clamp(48px, 15vw, 140px);
            
            --padding-slide: clamp(20px, 5vw, 80px);
            --gap-grid: clamp(16px, 3vw, 40px);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
            background: #000;
            color: #fff;
            overflow: hidden;
            overscroll-behavior: none;
        }

        .slide {
            display: none;
            width: 100vw;
            min-height: 100vh;
            min-height: 100dvh;
            padding: clamp(60px, 10vw, 120px) var(--padding-slide) clamp(80px, 12vw, 100px);
            flex-direction: column;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .slide.active {
            display: flex;
        }

        .center {
            text-align: center;
            align-items: center;
            justify-content: center;
        }

        @media (max-height: 500px) and (orientation: landscape) {
            .slide {
                padding: 16px var(--padding-slide) 60px;
            }
            .slide.center {
                justify-content: flex-start;
                padding-top: 40px;
            }
        }

        @media (prefers-reduced-motion: reduce) {
            .slide, .slide * {
                animation: none !important;
                transition: none !important;
            }
        }

        .section-label {
            font-size: var(--font-small);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--accent);
            margin-bottom: 16px;
        }

        .part-label {
            font-size: var(--font-small);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: rgba(255, 255, 255, 0.5);
            margin-bottom: 8px;
        }

        .headline {
            font-size: var(--font-headline);
            font-weight: 700;
            letter-spacing: -2px;
            line-height: 1.1;
            margin-bottom: 24px;
        }

        .medium-headline {
            font-size: var(--font-medium-headline);
            font-weight: 600;
            letter-spacing: -1px;
            line-height: 1.2;
            margin-bottom: 24px;
        }

        .subhead {
            font-size: var(--font-subhead);
            color: rgba(255, 255, 255, 0.7);
            max-width: 700px;
            line-height: 1.5;
        }

        .small-text {
            font-size: var(--font-small);
            color: rgba(255, 255, 255, 0.4);
            margin-top: 32px;
        }

        .thirds {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(min(280px, 100%), 1fr));
            gap: var(--gap-grid);
            margin-top: 32px;
            width: 100%;
            max-width: 1200px;
        }

        .fourths {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(min(220px, 100%), 1fr));
            gap: var(--gap-grid);
            margin-top: 32px;
            width: 100%;
            max-width: 1200px;
        }

        .split {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(min(300px, 100%), 1fr));
            gap: var(--gap-grid);
            margin-top: 32px;
            width: 100%;
            max-width: 1200px;
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: clamp(12px, 2vw, 16px);
            padding: clamp(16px, 4vw, 28px);
        }

        .card-title {
            font-size: clamp(16px, 3vw, 20px);
            font-weight: 600;
            margin-bottom: 12px;
            color: #fff;
        }

        .card-desc {
            font-size: var(--font-body);
            color: rgba(255, 255, 255, 0.6);
            line-height: 1.5;
        }

        .card-number {
            font-size: clamp(24px, 5vw, 36px);
            font-weight: 700;
            background: linear-gradient(135deg, #FF2D92, #FF9F0A);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
        }

        .card.success {
            border-color: var(--green);
            background: rgba(48, 209, 88, 0.1);
        }

        .card.danger {
            border-color: var(--red);
            background: rgba(255, 69, 58, 0.1);
        }

        .card.warning {
            border-color: var(--orange);
            background: rgba(255, 159, 10, 0.1);
        }

        .card.accent {
            border-color: var(--accent);
            background: var(--accent-dim);
        }

        .code-block {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: clamp(12px, 3vw, 20px) clamp(16px, 4vw, 28px);
            font-family: 'SF Mono', 'Fira Code', 'Courier New', monospace;
            font-size: clamp(11px, 1.8vw, 14px);
            line-height: 1.6;
            white-space: pre-wrap;
            word-wrap: break-word;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin-top: 24px;
            max-width: 100%;
        }

        .code-block .comment { color: rgba(255, 255, 255, 0.4); }
        .code-block .keyword { color: var(--accent); }
        .code-block .string { color: var(--green); }
        .code-block .function { color: var(--blue); }
        .code-block .type { color: var(--teal); }
        .code-block .error { color: var(--red); }

        .big-number {
            font-size: var(--font-big-number);
            font-weight: 800;
            background: linear-gradient(135deg, #FF2D92, #FF9F0A);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
        }

        .big-number.green {
            background: linear-gradient(135deg, var(--green), var(--teal));
            -webkit-background-clip: text;
            background-clip: text;
        }

        .velocity-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(min(140px, 100%), 1fr));
            gap: var(--gap-grid);
            margin-top: 48px;
            width: 100%;
            max-width: 900px;
        }

        .velocity-stat {
            text-align: center;
        }

        .velocity-number {
            font-size: clamp(36px, 10vw, 72px);
            font-weight: 800;
            background: linear-gradient(135deg, #FF2D92, #FF9F0A);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .velocity-label {
            font-size: var(--font-small);
            color: rgba(255, 255, 255, 0.5);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 8px;
        }

        .quote {
            font-size: var(--font-subhead);
            font-style: italic;
            color: rgba(255, 255, 255, 0.8);
            border-left: 3px solid var(--accent);
            padding-left: 24px;
            margin: 32px 0;
            max-width: 700px;
        }

        .quote.frustration {
            border-left-color: var(--red);
        }

        .quote.insight {
            border-left-color: var(--green);
        }

        .highlight {
            color: var(--accent);
            font-weight: 600;
        }

        .highlight-red {
            color: var(--red);
            font-weight: 600;
        }

        .gradient-text {
            background: linear-gradient(135deg, #FF2D92, #FF9F0A);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .bullet-list {
            list-style: none;
            margin-top: 24px;
        }

        .bullet-list li {
            font-size: var(--font-body);
            color: rgba(255, 255, 255, 0.8);
            padding: 8px 0;
            padding-left: 24px;
            position: relative;
            line-height: 1.5;
        }

        .bullet-list li::before {
            content: '';
            position: absolute;
            left: 0;
            top: 16px;
            width: 8px;
            height: 8px;
            background: var(--accent);
            border-radius: 50%;
        }

        .bullet-list.danger li::before {
            background: var(--red);
        }

        .numbered-list {
            list-style: none;
            margin-top: 24px;
            counter-reset: item;
        }

        .numbered-list li {
            font-size: var(--font-body);
            color: rgba(255, 255, 255, 0.8);
            padding: 12px 0;
            padding-left: 40px;
            position: relative;
            line-height: 1.5;
            counter-increment: item;
        }

        .numbered-list li::before {
            content: counter(item);
            position: absolute;
            left: 0;
            top: 10px;
            width: 24px;
            height: 24px;
            background: var(--accent);
            border-radius: 50%;
            color: #000;
            font-size: 12px;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .comparison-table {
            width: 100%;
            max-width: 800px;
            margin-top: 32px;
            border-collapse: collapse;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 16px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: var(--font-body);
        }

        .comparison-table th {
            color: rgba(255, 255, 255, 0.5);
            font-weight: 600;
            text-transform: uppercase;
            font-size: var(--font-small);
            letter-spacing: 1px;
        }

        .comparison-table .label {
            color: rgba(255, 255, 255, 0.6);
        }

        /* Navigation */
        .nav {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            z-index: 100;
        }

        .nav-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-dot.active {
            background: var(--accent);
            transform: scale(1.3);
        }

        .slide-counter {
            position: fixed;
            bottom: 20px;
            right: 24px;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.4);
            z-index: 100;
        }

        /* Part divider styling */
        .part-number {
            font-size: clamp(100px, 25vw, 200px);
            font-weight: 900;
            color: rgba(255, 255, 255, 0.03);
            position: absolute;
            right: 5%;
            top: 50%;
            transform: translateY(-50%);
            line-height: 1;
            z-index: 0;
        }

        .slide-content {
            position: relative;
            z-index: 1;
        }

        /* Timeline styling */
        .timeline {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-top: 32px;
            max-width: 800px;
        }

        .timeline-item {
            display: flex;
            gap: 16px;
            align-items: flex-start;
        }

        .timeline-date {
            font-size: var(--font-small);
            color: var(--accent);
            font-weight: 600;
            min-width: 80px;
            flex-shrink: 0;
        }

        .timeline-content {
            font-size: var(--font-body);
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.5;
        }

        /* Dark alley visual */
        .dark-alley {
            background: linear-gradient(135deg, rgba(255, 69, 58, 0.2), rgba(0, 0, 0, 0.8));
            border: 1px solid var(--red);
        }

        .light-path {
            background: linear-gradient(135deg, rgba(48, 209, 88, 0.2), rgba(0, 0, 0, 0.8));
            border: 1px solid var(--green);
        }

        /* Bug cascade styling */
        .bug-cascade {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 32px;
            max-width: 900px;
        }

        .bug-item {
            display: grid;
            grid-template-columns: 50px 1fr;
            gap: 16px;
            align-items: start;
        }

        .bug-number {
            width: 50px;
            height: 50px;
            background: var(--red);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 800;
            color: #000;
            flex-shrink: 0;
        }

        .bug-content {
            background: rgba(255, 69, 58, 0.1);
            border: 1px solid rgba(255, 69, 58, 0.3);
            border-radius: 12px;
            padding: 16px 20px;
        }

        .bug-title {
            font-size: clamp(16px, 3vw, 18px);
            font-weight: 600;
            color: var(--red);
            margin-bottom: 8px;
        }

        .bug-symptom {
            font-size: var(--font-body);
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 8px;
        }

        .bug-hidden {
            font-size: var(--font-small);
            color: rgba(255, 255, 255, 0.5);
            font-style: italic;
        }

        .bug-arrow {
            display: flex;
            justify-content: center;
            padding: 8px 0;
            color: var(--orange);
            font-size: 20px;
        }

        .error-terminal {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid var(--red);
            border-radius: 12px;
            padding: clamp(16px, 4vw, 24px);
            font-family: 'SF Mono', 'Fira Code', 'Courier New', monospace;
            font-size: clamp(12px, 2vw, 15px);
            line-height: 1.8;
            margin-top: 24px;
            max-width: 800px;
        }

        .error-terminal .prompt {
            color: var(--green);
        }

        .error-terminal .error-line {
            color: var(--red);
            font-weight: 600;
        }

        .error-terminal .dim {
            color: rgba(255, 255, 255, 0.4);
        }
    </style>
</head>
<body>
    <!-- Slide 1: Title -->
    <div class="slide active center">
        <div class="section-label">Amplifier Development Story</div>
        <h1 class="headline">Escaping <span class="gradient-text">Dark Alleys</span></h1>
        <p class="subhead">How process discipline and design investment transformed AI development</p>
        <p class="subhead" style="margin-top: 16px; font-size: var(--font-body);">7 days · 18 sessions · 4 repositories · A new foundation for orchestration</p>
        <div class="small-text">January 28 – February 4, 2026</div>
    </div>

    <!-- Slide 2: The Two Lessons (Preview) -->
    <div class="slide center">
        <div class="section-label">The Through-Line</div>
        <h2 class="headline">Two <span class="gradient-text">Key Lessons</span></h2>

        <div class="split" style="margin-top: 48px; max-width: 1000px;">
            <div class="card light-path" style="text-align: center;">
                <div class="card-number" style="font-size: clamp(32px, 6vw, 48px);">01</div>
                <div class="card-title">Process Discipline</div>
                <div class="card-desc">Using rigorous validation, working memory, and phase gates prevents the AI from wandering down <strong>dark alleys</strong></div>
            </div>
            <div class="card light-path" style="text-align: center;">
                <div class="card-number" style="font-size: clamp(32px, 6vw, 48px);">02</div>
                <div class="card-title">Design Investment</div>
                <div class="card-desc">Putting effort into design early produces powerful primitives that solve a <strong>whole class of problems</strong></div>
            </div>
        </div>
    </div>

    <!-- ==================== PART 1: THE FOREMAN TROUBLES ==================== -->

    <!-- Slide 3: Part 1 Divider -->
    <div class="slide center" style="position: relative;">
        <div class="part-number">1</div>
        <div class="slide-content">
            <div class="part-label">Part 1</div>
            <h2 class="headline">The <span class="gradient-text">Foreman Troubles</span></h2>
            <p class="subhead">January 28 – February 2</p>
            <p class="subhead" style="margin-top: 24px; opacity: 0.6;">When the AI went down dark alleys</p>
        </div>
    </div>

    <!-- Slide 4: The Vision -->
    <div class="slide">
        <div class="part-label">Part 1 · The Foreman Troubles</div>
        <div class="section-label">The Vision</div>
        <h2 class="headline">The <span class="gradient-text">Foreman Pattern</span></h2>
        <p class="subhead">An AI session spawning and managing worker sub-sessions through an issue queue</p>
        
        <div class="thirds">
            <div class="card">
                <div class="card-title">Fire-and-Forget Workers</div>
                <div class="card-desc">Spawn workers that complete tasks independently, no synchronous waiting required</div>
            </div>
            <div class="card">
                <div class="card-title">Typed Worker Pools</div>
                <div class="card-desc">Different worker types for different tasks: researcher, implementer, reviewer</div>
            </div>
            <div class="card">
                <div class="card-title">Issue-Based Coordination</div>
                <div class="card-desc">Workers pick up tasks from a queue, post results back. The queue is the protocol.</div>
            </div>
        </div>
    </div>

    <!-- Slide 5: The Confidence Gap -->
    <div class="slide">
        <div class="part-label">Part 1 · The Foreman Troubles</div>
        <div class="section-label">The Confidence Gap</div>
        <h2 class="headline">Tests Said: <span class="gradient-text">All Good</span></h2>
        
        <div class="split">
            <div class="card success">
                <div class="card-number">13</div>
                <div class="card-title">Unit Tests Passing</div>
                <div class="card-desc">Every test green. All paths exercised. Clean coverage.</div>
            </div>
            <div class="card success">
                <div class="card-number">100%</div>
                <div class="card-title">Code Coverage</div>
                <div class="card-desc">All branches covered. HIGH confidence declared.</div>
            </div>
        </div>

        <div class="quote" style="margin-top: 48px;">
            "The prototype looks solid. Time for manual testing..."
        </div>
    </div>

    <!-- Slide 6: Reality Fails -->
    <div class="slide">
        <div class="part-label">Part 1 · The Foreman Troubles</div>
        <div class="section-label">The Confidence Gap</div>
        <h2 class="headline">Reality Said: <span class="gradient-text">Catastrophic Failure</span></h2>
        
        <div class="code-block"><span class="comment"># The AI asserted "workers are running"</span>
<span class="comment"># But the session logs told a different story:</span>

<span class="function">grep</span> -r <span class="string">"spawn"</span> events.jsonl
<span class="error"># No spawn events. Nothing was started.</span>

<span class="comment"># Workers weren't running. They never existed.</span></div>

        <p class="subhead" style="margin-top: 32px;">The AI claimed things worked <span class="highlight-red">without actually verifying them</span></p>
    </div>

    <!-- Slide 7: The Error Messages -->
    <div class="slide">
        <div class="part-label">Part 1 · The Foreman Troubles</div>
        <div class="section-label">What the User Saw</div>
        <h2 class="headline">The <span class="gradient-text">Error Messages</span></h2>

        <div class="error-terminal">
            <div class="error-line">ERROR: Required capability 'bundle.load' not available</div>
            <div style="height: 12px;"></div>
            <div class="error-line">ERROR: Session not found</div>
            <div style="height: 16px;"></div>
            <div class="dim"># Workers spawned but couldn't load bundles</div>
            <div class="dim"># Parent couldn't find child sessions</div>
            <div class="dim"># Nothing worked outside the test environment</div>
        </div>

        <div class="split" style="margin-top: 32px;">
            <div class="card danger">
                <div class="card-title">The Irony</div>
                <div class="card-desc">The AI mocked <code>bundle.load</code> — a capability that <strong>doesn't exist</strong>. The real <code>session.spawn</code> was available the whole time.</div>
            </div>
            <div class="card danger">
                <div class="card-title">The Gap</div>
                <div class="card-desc">Tests ran against fantasy APIs. Manual testing hit reality. <strong>100% coverage of code that couldn't work.</strong></div>
            </div>
        </div>
    </div>

    <!-- Slide 8: The Dark Alleys -->
    <div class="slide">
        <div class="part-label">Part 1 · The Foreman Troubles</div>
        <div class="section-label">What Went Wrong</div>
        <h2 class="headline">Down the <span class="gradient-text">Dark Alleys</span></h2>
        <p class="subhead">These were <span class="highlight-red">AI practice failures</span>, not missing primitives</p>

        <ul class="bullet-list danger" style="max-width: 800px; margin-top: 32px;">
            <li><strong>Mocked fake capabilities</strong> — Created <code>bundle.load</code> and <code>session.AmplifierSession</code> that didn't exist. <span class="highlight">The real <code>session.spawn</code> was there the whole time.</span></li>
            <li><strong>Didn't study reference implementations</strong> — The task tool showed the correct pattern. It was never consulted.</li>
            <li><strong>Asserted without verifying</strong> — "Workers are running" when spawn events never appeared in logs</li>
            <li><strong>Tests tested nothing</strong> — 13 tests, 100% coverage → all against mocked APIs that didn't match reality</li>
        </ul>
    </div>

    <!-- Slide 9: The Bug Cascade Title -->
    <div class="slide center">
        <div class="part-label">Part 1 · The Foreman Troubles</div>
        <div class="section-label">Progressive Discovery</div>
        <h2 class="headline">The <span class="gradient-text">Bug Cascade</span></h2>
        <p class="subhead" style="margin-top: 24px;">Once manual testing started, each fix revealed the next layer.</p>
        <p class="subhead" style="margin-top: 16px; color: var(--orange);">Four bugs. Four assumptions. All wrong.</p>
    </div>

    <!-- Slide 10: Bug 1 - Status Vocabulary -->
    <div class="slide">
        <div class="part-label">Part 1 · Bug Cascade</div>
        <div class="section-label">Bug 1 of 4</div>
        <h2 class="medium-headline"><span class="highlight-red">Status Vocabulary Mismatch</span></h2>

        <div class="split" style="margin-top: 32px;">
            <div class="card danger">
                <div class="card-title">The Symptom</div>
                <div class="card-desc">Workers completed their tasks, but the Foreman never saw them finish. Tasks stayed "in progress" forever.</div>
            </div>
            <div class="card warning">
                <div class="card-title">The Root Cause</div>
                <div class="card-desc">Workers posted status <code>"completed"</code>. The tool expected <code>"closed"</code>. <strong>The error was silently swallowed.</strong></div>
            </div>
        </div>

        <div class="code-block" style="margin-top: 24px;"><span class="comment"># Worker posted:</span>
{ <span class="string">"status"</span>: <span class="string">"completed"</span>, <span class="string">"result"</span>: <span class="string">"Task done!"</span> }

<span class="comment"># Tool expected:</span>
{ <span class="string">"status"</span>: <span class="string">"closed"</span>, ... }

<span class="comment"># Result: Update silently ignored. No error. No log. Nothing.</span></div>

        <p class="subhead" style="margin-top: 24px; color: var(--orange);">Fix applied → Bug 2 discovered ↓</p>
    </div>

    <!-- Slide 11: Bug 2 - Session Storage -->
    <div class="slide">
        <div class="part-label">Part 1 · Bug Cascade</div>
        <div class="section-label">Bug 2 of 4</div>
        <h2 class="medium-headline"><span class="highlight-red">Session Storage Paths</span></h2>

        <div class="split" style="margin-top: 32px;">
            <div class="card danger">
                <div class="card-title">The Symptom</div>
                <div class="card-desc">Parent session couldn't find child sessions. <code>"Session not found"</code> errors everywhere.</div>
            </div>
            <div class="card warning">
                <div class="card-title">The Root Cause</div>
                <div class="card-desc">Project directory derived from <code>cwd</code>. Workers started in different directories → ended up in <strong>wrong session stores</strong>.</div>
            </div>
        </div>

        <div class="code-block" style="margin-top: 24px;"><span class="comment"># Parent session:</span>
~/.amplifier/projects/<span class="string">spawn-events-work</span>/sessions/parent-123/

<span class="comment"># Worker session (wrong!):</span>
~/.amplifier/projects/<span class="string">amplifier-core</span>/sessions/worker-456/

<span class="comment"># Parent looks for child: "Session not found"</span></div>

        <p class="subhead" style="margin-top: 24px; color: var(--orange);">Fix applied → Bug 3 discovered ↓</p>
    </div>

    <!-- Slide 12: Bug 3 - Tool Source Paths -->
    <div class="slide">
        <div class="part-label">Part 1 · Bug Cascade</div>
        <div class="section-label">Bug 3 of 4</div>
        <h2 class="medium-headline"><span class="highlight-red">Tool Source Paths</span></h2>

        <div class="split" style="margin-top: 32px;">
            <div class="card danger">
                <div class="card-title">The Symptom</div>
                <div class="card-desc">Workers declared tools in their bundles but got <code>"capability not available"</code> at runtime.</div>
            </div>
            <div class="card warning">
                <div class="card-title">The Root Cause</div>
                <div class="card-desc">Git URLs missing <code>#subdirectory=</code> fragment. Tool resolver couldn't find the package inside the repo.</div>
            </div>
        </div>

        <div class="code-block" style="margin-top: 24px;"><span class="comment"># Bundle declared (wrong):</span>
source: <span class="error">git+https://github.com/org/tools.git</span>

<span class="comment"># Should have been:</span>
source: <span class="string">git+https://github.com/org/tools.git#subdirectory=packages/my-tool</span>

<span class="comment"># Workers thought they had tools. They didn't.</span></div>

        <p class="subhead" style="margin-top: 24px; color: var(--orange);">Fix applied → Bug 4 discovered ↓</p>
    </div>

    <!-- Slide 13: Bug 4 - Race Conditions -->
    <div class="slide">
        <div class="part-label">Part 1 · Bug Cascade</div>
        <div class="section-label">Bug 4 of 4</div>
        <h2 class="medium-headline"><span class="highlight-red">Concurrent File Access</span></h2>

        <div class="split" style="margin-top: 32px;">
            <div class="card danger">
                <div class="card-title">The Symptom</div>
                <div class="card-desc">3 workers completed successfully. But only 1 result appeared in the output file.</div>
            </div>
            <div class="card warning">
                <div class="card-title">The Root Cause</div>
                <div class="card-desc">Multiple workers writing to the same file simultaneously. <strong>Last writer wins</strong> — overwrote the others.</div>
            </div>
        </div>

        <div class="code-block" style="margin-top: 24px;"><span class="comment"># Timeline:</span>
Worker A: <span class="function">open</span>(<span class="string">"results.json"</span>, <span class="string">"w"</span>)  <span class="comment"># t=0ms</span>
Worker B: <span class="function">open</span>(<span class="string">"results.json"</span>, <span class="string">"w"</span>)  <span class="comment"># t=5ms</span>
Worker C: <span class="function">open</span>(<span class="string">"results.json"</span>, <span class="string">"w"</span>)  <span class="comment"># t=10ms</span>
Worker A: <span class="function">write</span>(result_a)              <span class="comment"># t=100ms</span>
Worker B: <span class="function">write</span>(result_b)              <span class="comment"># t=105ms - overwrites A</span>
Worker C: <span class="function">write</span>(result_c)              <span class="comment"># t=110ms - overwrites B</span>

<span class="comment"># Final file: only Worker C's result. A and B lost forever.</span></div>
    </div>

    <!-- Slide 14: Bug Cascade Summary -->
    <div class="slide">
        <div class="part-label">Part 1 · The Foreman Troubles</div>
        <div class="section-label">The Full Picture</div>
        <h2 class="headline">Four Layers of <span class="gradient-text">Assumptions</span></h2>

        <div class="bug-cascade">
            <div class="bug-item">
                <div class="bug-number">1</div>
                <div class="bug-content">
                    <div class="bug-title">Status Vocabulary</div>
                    <div class="bug-symptom">"completed" vs "closed" — silently ignored</div>
                </div>
            </div>
            <div class="bug-arrow">↓ fix → discover</div>
            <div class="bug-item">
                <div class="bug-number">2</div>
                <div class="bug-content">
                    <div class="bug-title">Session Storage</div>
                    <div class="bug-symptom">Wrong directories — parent couldn't find children</div>
                </div>
            </div>
            <div class="bug-arrow">↓ fix → discover</div>
            <div class="bug-item">
                <div class="bug-number">3</div>
                <div class="bug-content">
                    <div class="bug-title">Tool Source Paths</div>
                    <div class="bug-symptom">Missing #subdirectory — tools didn't load</div>
                </div>
            </div>
            <div class="bug-arrow">↓ fix → discover</div>
            <div class="bug-item">
                <div class="bug-number">4</div>
                <div class="bug-content">
                    <div class="bug-title">Race Conditions</div>
                    <div class="bug-symptom">Concurrent writes — results overwritten</div>
                </div>
            </div>
        </div>

        <p class="subhead" style="margin-top: 32px;">Every assumption the AI made turned out to be wrong</p>
    </div>

    <!-- Slide 15: User Frustration -->
    <div class="slide center">
        <div class="part-label">Part 1 · The Foreman Troubles</div>
        <div class="section-label">The Breaking Point</div>
        
        <div class="quote frustration" style="text-align: left; font-size: var(--font-medium-headline); max-width: 900px;">
            "You assured me your testing strategy confirmed it would work with a <span class="highlight-red">high-degree of confidence</span>."
        </div>

        <p class="subhead" style="margin-top: 48px;">The primitives existed. The process was broken.<br>The AI went down dark alleys — making assumptions, mocking fake APIs,<br>claiming things worked without verifying.</p>
    </div>

    <!-- Slide 16: Part 1 Lesson -->
    <div class="slide center">
        <div class="part-label">Part 1 · The Foreman Troubles</div>
        <div class="section-label">The Lesson</div>
        <h2 class="headline">The Capabilities <span class="gradient-text">Were There</span></h2>
        <p class="subhead" style="margin-top: 24px;">The problem was <span class="highlight">unvalidated AI assumptions</span>.</p>
        <p class="subhead" style="margin-top: 16px;"><code>session.spawn</code> existed the whole time. The AI just never looked.</p>
        <p class="subhead" style="margin-top: 16px; color: var(--orange);">This wasn't a tooling problem. It was a <strong>process</strong> problem.</p>
    </div>

    <!-- ==================== PART 2: RIGOROUS DESIGN VALIDATION ==================== -->

    <!-- Slide 17: Part 2 Divider -->
    <div class="slide center" style="position: relative;">
        <div class="part-number">2</div>
        <div class="slide-content">
            <div class="part-label">Part 2</div>
            <h2 class="headline">Rigorous <span class="gradient-text">Design Validation</span></h2>
            <p class="subhead">February 3</p>
            <p class="subhead" style="margin-top: 24px; opacity: 0.6;">Understand first. Design second. Implement last.</p>
        </div>
    </div>

    <!-- Slide 18: Context First -->
    <div class="slide">
        <div class="part-label">Part 2 · Rigorous Design Validation</div>
        <div class="section-label">The Opposite of Part 1</div>
        <h2 class="headline">Context First, <span class="gradient-text">Design Second</span></h2>
        <p class="subhead">The design process started by <span class="highlight">studying the existing system</span></p>

        <div class="quote insight" style="margin-top: 32px; font-size: var(--font-body); max-width: 900px;">
            "Check out the following... and let's talk about the overall design of sessions spawning sessions"
        </div>

        <div class="code-block" style="margin-top: 24px;"><span class="comment"># The user's prompt — study BEFORE designing:</span>

<span class="function">amplifier-core/</span>amplifier_core/<span class="string">session.py</span>
    <span class="comment">→ How sessions actually work</span>

<span class="function">amplifier-foundation/</span>modules/tool-delegate/
    <span class="comment">→ How the existing delegate tool spawns agents</span>

<span class="function">amplifier-app-cli/</span>session_runner.py, session_spawner.py
    <span class="comment">→ How the CLI registers the spawner</span>

<span class="function">amplifier-bundle-observers/</span>
    <span class="comment">→ What was already built</span>

<span class="function">amplifier-bundle-foreman/</span>
    <span class="comment">→ What we learned from the troubles</span></div>

        <p class="subhead" style="margin-top: 24px;">In Part 1, the AI assumed and mocked. In Part 2, <span class="highlight">we looked first</span>.</p>
    </div>

    <!-- Slide 19: The Contrast -->
    <div class="slide">
        <div class="part-label">Part 2 · Rigorous Design Validation</div>
        <div class="section-label">The Difference</div>
        <h2 class="headline">Two <span class="gradient-text">Approaches</span></h2>

        <div class="split" style="margin-top: 32px;">
            <div class="card dark-alley">
                <div class="card-title" style="color: var(--red);">Part 1: Dark Alley</div>
                <div class="card-desc" style="margin-top: 12px;">
                    <strong>Jumped into implementation</strong><br><br>
                    • Assumed <code>bundle.load</code> existed<br>
                    • Mocked <code>session.AmplifierSession</code><br>
                    • Never studied <code>tool-delegate</code><br>
                    • Never looked at <code>session.spawn</code>
                </div>
            </div>
            <div class="card light-path">
                <div class="card-title" style="color: var(--green);">Part 2: Lit Path</div>
                <div class="card-desc" style="margin-top: 12px;">
                    <strong>Built context before designing</strong><br><br>
                    • Studied how sessions actually work<br>
                    • Read the existing delegate tool<br>
                    • Understood the CLI spawner<br>
                    • Learned from foreman's failures
                </div>
            </div>
        </div>

        <p class="subhead" style="margin-top: 32px;">Same goal. Opposite process. <span class="highlight">Different outcome.</span></p>
    </div>

    <!-- Slide 20: The New Approach -->
    <div class="slide">
        <div class="part-label">Part 2 · Rigorous Design Validation</div>
        <div class="section-label">The Shift</div>
        <h2 class="headline">Trust But <span class="gradient-text">Verify</span></h2>

        <div class="split">
            <div class="card dark-alley">
                <div class="card-title" style="color: var(--red);">Before: Dark Alley</div>
                <div class="card-desc">Design document read as "current architecture" — assumed it existed without checking code</div>
            </div>
            <div class="card light-path">
                <div class="card-title" style="color: var(--green);">After: Lit Path</div>
                <div class="card-desc">Every proposed primitive validated against existing code. <strong>Gaps identified before implementation started.</strong></div>
            </div>
        </div>

        <div class="code-block" style="margin-top: 32px;"><span class="comment"># Code analysis reveals the truth</span>

<span class="function">grep</span> -r <span class="string">"spawn_bundle"</span> amplifier-core/src/
<span class="error"># No results - doesn't exist yet</span>

<span class="function">grep</span> -r <span class="string">"EventRouter"</span> amplifier-core/src/
<span class="error"># No results - needs to be built</span>

<span class="function">grep</span> -r <span class="string">"TriggerSource"</span> amplifier-core/src/
<span class="error"># No results - proposed, not implemented</span>

<span class="comment"># Now we know exactly what needs to be built</span></div>
    </div>

    <!-- Slide 13: The Aha Moment -->
    <div class="slide">
        <div class="part-label">Part 2 · Rigorous Design Validation</div>
        <div class="section-label">The Breakthrough</div>
        <h2 class="headline">The <span class="gradient-text">Aha Moment</span></h2>

        <div class="quote insight">
            "What if agents were never a separate concept? They're just <span class="highlight">inline bundle definitions</span> that inherit heavily from the parent session."
        </div>

        <p class="subhead" style="margin-top: 32px;"><span class="gradient-text">Agent spawning IS bundle spawning</span> — just with different inheritance levels.</p>

        <table class="comparison-table" style="margin-top: 40px;">
            <thead>
                <tr>
                    <th>Inheritance</th>
                    <th>What You Get</th>
                    <th>What You Override</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><span class="highlight">Full Bundle</span></td>
                    <td class="label">Nothing</td>
                    <td>Everything — define it all yourself</td>
                </tr>
                <tr>
                    <td><span class="highlight">Agent</span></td>
                    <td class="label">Provider, settings, most context</td>
                    <td>Tools, specific context, instructions</td>
                </tr>
                <tr>
                    <td><span class="highlight">Self</span></td>
                    <td class="label">Everything</td>
                    <td>Just fork — new instance, same config</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Slide 14: The New Design -->
    <div class="slide">
        <div class="part-label">Part 2 · Rigorous Design Validation</div>
        <div class="section-label">The Architecture</div>
        <h2 class="headline">Validated <span class="gradient-text">Design</span></h2>
        <p class="subhead">Primitives that solve multi-agent orchestration generally, not just Foreman</p>

        <div class="fourths">
            <div class="card accent">
                <div class="card-title">spawn_bundle()</div>
                <div class="card-desc">Unified spawning function. One primitive for all inheritance levels.</div>
            </div>
            <div class="card accent">
                <div class="card-title">EventRouter</div>
                <div class="card-desc">Cross-session event communication. Sessions can emit and listen.</div>
            </div>
            <div class="card accent">
                <div class="card-title">TriggerSource</div>
                <div class="card-desc">Reactive triggers protocol. Timer, SessionEvent, Manual.</div>
            </div>
            <div class="card accent">
                <div class="card-title">BackgroundSessionManager</div>
                <div class="card-desc">Lifecycle management. Health checks. Graceful shutdown.</div>
            </div>
        </div>

        <p class="subhead" style="margin-top: 32px;">Design investment produced primitives that solve a <span class="highlight">whole class of problems</span></p>
    </div>

    <!-- ==================== PART 3: IMPLEMENTATION INFRASTRUCTURE ==================== -->

    <!-- Slide 15: Part 3 Divider -->
    <div class="slide center" style="position: relative;">
        <div class="part-number">3</div>
        <div class="slide-content">
            <div class="part-label">Part 3</div>
            <h2 class="headline">Implementation <span class="gradient-text">Infrastructure</span></h2>
            <p class="subhead">February 3–4</p>
            <p class="subhead" style="margin-top: 24px; opacity: 0.6;">Guardrails that prevent dark alleys</p>
        </div>
    </div>

    <!-- Slide 16: The Question -->
    <div class="slide">
        <div class="part-label">Part 3 · Implementation Infrastructure</div>
        <div class="section-label">The Challenge</div>
        <h2 class="headline">How to Work<br><span class="gradient-text">Without Wandering?</span></h2>
        
        <div class="quote insight">
            "How should I start this implementation process? What's the best way to ensure it requires <span class="highlight">as little intervention from me as possible</span> until it is fully done?"
        </div>

        <p class="subhead" style="margin-top: 24px;">After the Foreman troubles, confidence was needed that the AI could work autonomously <strong>without going down dark alleys</strong>.</p>
    </div>

    <!-- Slide 17: The Four Pillars -->
    <div class="slide">
        <div class="part-label">Part 3 · Implementation Infrastructure</div>
        <div class="section-label">The Methodology</div>
        <h2 class="headline">Four Pillars of<br><span class="gradient-text">Process Discipline</span></h2>

        <div class="fourths">
            <div class="card light-path">
                <div class="card-title">AGENTS.md</div>
                <div class="card-desc">Auto-loaded context for any session in the directory. <strong>No re-explaining the project.</strong> The AI always knows the mission.</div>
            </div>
            <div class="card light-path">
                <div class="card-title">Working Memory</div>
                <div class="card-desc">Session state "save game" that persists. <strong>AI knows where it left off.</strong> No context loss between sessions.</div>
            </div>
            <div class="card light-path">
                <div class="card-title">PHASE-GATES.md</div>
                <div class="card-desc">Checkbox tracking with explicit criteria. <strong>AI knows what "done" means.</strong> No subjective judgment calls.</div>
            </div>
            <div class="card light-path">
                <div class="card-title">Validation Recipes</div>
                <div class="card-desc">Automated PASS/FAIL verification. <strong>No "looks good" — objective gates.</strong> Trust is earned by evidence.</div>
            </div>
        </div>
    </div>

    <!-- Slide 18: The Workspace -->
    <div class="slide">
        <div class="part-label">Part 3 · Implementation Infrastructure</div>
        <div class="section-label">The Infrastructure</div>
        <h2 class="medium-headline">The <span class="gradient-text">Workspace</span> Created</h2>

        <div class="code-block"><span class="comment">/data/repos/spawn-events-work/</span>
├── <span class="keyword">.amplifier/</span>
│   ├── <span class="function">AGENTS.md</span>           <span class="comment">← Context auto-loaded for any session</span>
│   └── working-memory/
│       └── <span class="function">spawn-events-impl.md</span> <span class="comment">← Session "save game"</span>
├── <span class="keyword">docs/</span>
│   ├── <span class="function">PHASE-GATES.md</span>      <span class="comment">← Checkbox progress tracking</span>
│   └── <span class="function">integrated-design-impl.md</span> <span class="comment">← Full spec with exact code</span>
├── <span class="keyword">recipes/</span>
│   └── <span class="function">validate-phase-*.yaml</span> <span class="comment">← Automated PASS/FAIL validation</span>
├── <span class="type">amplifier-core/</span>         <span class="comment">→ symlink</span>
└── <span class="type">amplifier-foundation/</span>   <span class="comment">→ symlink</span></div>
    </div>

    <!-- Slide 19: The Handoff -->
    <div class="slide center">
        <div class="part-label">Part 3 · Implementation Infrastructure</div>
        <div class="section-label">The Handoff</div>
        
        <div class="quote insight" style="text-align: center; border-left: none; padding-left: 0; font-size: var(--font-medium-headline);">
            "I'll be away for awhile, so make sure you keep making progress so it will be <span class="highlight">completed and validated</span> when I return."
        </div>

        <p class="subhead" style="margin-top: 48px;">The infrastructure enabled what came next:<br>The AI worked through ALL phases autonomously —<br>but this time with <span class="highlight">guardrails that prevented dark alleys</span>.</p>
    </div>

    <!-- ==================== PART 4: THE RESULT ==================== -->

    <!-- Slide 20: Part 4 Divider -->
    <div class="slide center" style="position: relative;">
        <div class="part-number">4</div>
        <div class="slide-content">
            <div class="part-label">Part 4</div>
            <h2 class="headline">The <span class="gradient-text">Result</span></h2>
            <p class="subhead">February 4</p>
            <p class="subhead" style="margin-top: 24px; opacity: 0.6;">What process discipline + design investment produced</p>
        </div>
    </div>

    <!-- Slide 21: The Implementation Sprint -->
    <div class="slide">
        <div class="part-label">Part 4 · The Result</div>
        <div class="section-label">Autonomous Execution</div>
        <h2 class="headline">The <span class="gradient-text">Implementation Sprint</span></h2>
        <p class="subhead">5 phases executed autonomously — no dark alleys</p>

        <div class="timeline" style="margin-top: 40px;">
            <div class="timeline-item">
                <div class="timeline-date">Phase 1</div>
                <div class="timeline-content"><strong>SessionStorage Protocol</strong> — Abstract storage layer for session relationships</div>
            </div>
            <div class="timeline-item">
                <div class="timeline-date">Phase 2</div>
                <div class="timeline-content"><strong>spawn_bundle()</strong> — Core spawning function with inheritance levels</div>
            </div>
            <div class="timeline-item">
                <div class="timeline-date">Phase 3</div>
                <div class="timeline-content"><strong>EventRouter</strong> — Cross-session event communication</div>
            </div>
            <div class="timeline-item">
                <div class="timeline-date">Phase 4</div>
                <div class="timeline-content"><strong>TriggerSource Protocol</strong> — Timer, SessionEvent, Manual triggers</div>
            </div>
            <div class="timeline-item">
                <div class="timeline-date">Phase 5</div>
                <div class="timeline-content"><strong>BackgroundSessionManager</strong> — Lifecycle, health checks, shutdown</div>
            </div>
        </div>

        <p class="subhead" style="margin-top: 32px;">All phases completed — implementing, testing, fixing, committing —<br><span class="highlight">without human intervention</span>.</p>
    </div>

    <!-- Slide 22: New Primitives Delivered -->
    <div class="slide">
        <div class="part-label">Part 4 · The Result</div>
        <div class="section-label">What We Built</div>
        <h2 class="headline">New <span class="gradient-text">Primitives</span> Delivered</h2>

        <div class="thirds">
            <div class="card">
                <div class="card-title">spawn_bundle()</div>
                <div class="card-desc">The unified spawning function. Creates child sessions with configurable inheritance.</div>
            </div>
            <div class="card">
                <div class="card-title">SessionStorage Protocol</div>
                <div class="card-desc">Abstract storage layer. Parent can find children. Children can find parent.</div>
            </div>
            <div class="card">
                <div class="card-title">EventRouter</div>
                <div class="card-desc">Cross-session communication. Sessions can emit events, others can listen.</div>
            </div>
            <div class="card">
                <div class="card-title">TriggerSource Protocol</div>
                <div class="card-desc">TimerTrigger, SessionEventTrigger, ManualTrigger. Fire sessions on conditions.</div>
            </div>
            <div class="card">
                <div class="card-title">BackgroundSessionManager</div>
                <div class="card-desc">Manages lifecycle of spawned sessions. Health checks. Graceful shutdown.</div>
            </div>
            <div class="card">
                <div class="card-title">W3C Trace Context</div>
                <div class="card-desc">Full trace lineage across parent-child-grandchild. Observability built in.</div>
            </div>
        </div>
    </div>

    <!-- Slide 23: Stats -->
    <div class="slide center">
        <div class="part-label">Part 4 · The Result</div>
        <div class="section-label">The Numbers</div>
        <h2 class="medium-headline">What We Shipped</h2>

        <div class="velocity-grid">
            <div class="velocity-stat">
                <div class="velocity-number">~1,200</div>
                <div class="velocity-label">Lines of Code</div>
            </div>
            <div class="velocity-stat">
                <div class="velocity-number">11</div>
                <div class="velocity-label">New Files</div>
            </div>
            <div class="velocity-stat">
                <div class="velocity-number">461</div>
                <div class="velocity-label">Tests Passing</div>
            </div>
            <div class="velocity-stat">
                <div class="velocity-number">4</div>
                <div class="velocity-label">PRs Merged</div>
            </div>
        </div>
    </div>

    <!-- Slide 24: The Bigger Picture -->
    <div class="slide center">
        <div class="part-label">Part 4 · The Result</div>
        <div class="section-label">The Bigger Picture</div>
        <h2 class="headline">From <span class="gradient-text">Catalyst</span><br>to <span class="gradient-text">General Infrastructure</span></h2>

        <p class="subhead" style="margin-top: 32px;">The Foreman was just the catalyst.<br>These primitives now enable <span class="highlight">any</span> multi-agent pattern.</p>

        <div class="thirds" style="margin-top: 48px; max-width: 900px;">
            <div class="card" style="text-align: center;">
                <div class="card-title">Foreman + Workers</div>
                <div class="card-desc">Manager spawns specialized workers via issue queue</div>
            </div>
            <div class="card" style="text-align: center;">
                <div class="card-title">Pipeline Stages</div>
                <div class="card-desc">Sequential handoff with event-triggered transitions</div>
            </div>
            <div class="card" style="text-align: center;">
                <div class="card-title">Swarm Coordination</div>
                <div class="card-desc">Many agents collaborating via EventRouter</div>
            </div>
        </div>
    </div>

    <!-- Slide 25: The Contrast -->
    <div class="slide">
        <div class="section-label">The Transformation</div>
        <h2 class="headline">Dark Alleys vs <span class="gradient-text">Lit Paths</span></h2>

        <div class="split" style="margin-top: 40px;">
            <div class="card dark-alley">
                <div class="card-title" style="color: var(--red);">Part 1: Dark Alleys</div>
                <ul class="bullet-list danger" style="margin-top: 16px;">
                    <li>Mocked fake APIs without checking reality</li>
                    <li>Asserted "it works" without verification</li>
                    <li>100% test coverage of fantasies</li>
                    <li>Catastrophic failure on manual test</li>
                </ul>
            </div>
            <div class="card light-path">
                <div class="card-title" style="color: var(--green);">Parts 2–4: Lit Paths</div>
                <ul class="bullet-list" style="margin-top: 16px;">
                    <li>Validated every design claim against code</li>
                    <li>AGENTS.md + Working Memory for context</li>
                    <li>Phase gates with objective criteria</li>
                    <li>Autonomous completion — no intervention</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Slide 26: Key Themes -->
    <div class="slide center">
        <div class="section-label">The Two Lessons</div>
        <h2 class="headline">What We <span class="gradient-text">Learned</span></h2>

        <div class="split" style="margin-top: 48px; max-width: 1000px;">
            <div class="card light-path" style="text-align: left;">
                <div class="card-number" style="font-size: clamp(32px, 6vw, 48px);">01</div>
                <div class="card-title">Process Discipline Prevents Dark Alleys</div>
                <div class="card-desc" style="margin-top: 16px;">AGENTS.md, working memory, phase gates, and validation recipes kept the AI on track. The infrastructure matters as much as the code.</div>
            </div>
            <div class="card light-path" style="text-align: left;">
                <div class="card-number" style="font-size: clamp(32px, 6vw, 48px);">02</div>
                <div class="card-title">Design Investment Pays Off</div>
                <div class="card-desc" style="margin-top: 16px;">Rigorous validation produced primitives that solve a whole class of problems. Foreman was one pattern — the infrastructure enables all of them.</div>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <div class="nav" id="nav"></div>
    <div class="slide-counter" id="counter"></div>

    <script>
        const slides = document.querySelectorAll('.slide');
        let currentSlide = 0;

        function showSlide(n) {
            slides[currentSlide].classList.remove('active');
            currentSlide = (n + slides.length) % slides.length;
            slides[currentSlide].classList.add('active');
            updateNav();
        }

        function updateNav() {
            const nav = document.getElementById('nav');
            const counter = document.getElementById('counter');
            nav.innerHTML = '';
            slides.forEach((_, i) => {
                const dot = document.createElement('div');
                dot.className = 'nav-dot' + (i === currentSlide ? ' active' : '');
                dot.onclick = () => showSlide(i);
                nav.appendChild(dot);
            });
            counter.textContent = `${currentSlide + 1} / ${slides.length}`;
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === ' ') showSlide(currentSlide + 1);
            if (e.key === 'ArrowLeft') showSlide(currentSlide - 1);
        });

        // Click navigation
        document.addEventListener('click', (e) => {
            if (e.target.closest('.nav')) return;
            if (e.target.closest('.code-block')) return;
            if (e.clientX > window.innerWidth / 2) showSlide(currentSlide + 1);
            else showSlide(currentSlide - 1);
        });

        // Touch/swipe navigation
        let touchStartX = 0;
        let touchEndX = 0;
        const SWIPE_THRESHOLD = 50;

        document.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        }, { passive: true });

        document.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            const diff = touchStartX - touchEndX;
            if (Math.abs(diff) > SWIPE_THRESHOLD) {
                if (diff > 0) showSlide(currentSlide + 1);
                else showSlide(currentSlide - 1);
            }
        }, { passive: true });

        updateNav();
    </script>
</body>
</html>
